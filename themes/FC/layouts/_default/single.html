{{- define "main" -}}

{{ if not hugo.IsProduction }}
  {{- partial "debug.html" . -}}
{{ end }}

<header class="single-header">
  <h1 class="single-title">
    <span class="title">{{- .Title | .RenderString -}}
    {{- if .Draft -}}<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>{{- end -}}</span>
  </h1>
  {{- if .Description }}
  <div class="single-description">
    <span class="description">{{- .Description | .RenderString -}}</span>
  </div>
  {{- end }}
  {{/* For Download pages, call the download partial to provide download links from the latest release. */}}
  {{- if eq .Type "download" -}}
    <div class="download-header">
    {{ with (index (where site.RegularPages "Type" "releases") 0) }}
      {{- partial "download.html" . -}}
    {{ end }}
    </div>
  {{- end -}}
  {{- if eq .Type "news" -}}
  <div class="single-meta">
    <span class="meta">{{- partial "meta.html" . -}}</span>
  </div>
  {{- end -}}
  {{- partial "cover.html" . }}
</header>

{{- if (.Param "ShowToc") -}}
  {{- partial "toc.html" . -}}
{{- end -}}

{{/* Get the content of a Page. */}}
{{- partial "content.html" . -}}

{{/* For Release pages, call the download partial to provide download links from the current release page. */}}
{{- if eq .Type "releases" -}}
  <section class="download-release">
      {{- partial "download.html" . -}}
  </section>
{{- end -}}

<footer class="single-footer">
  {{- if (.Param "ShowPaginationLinks") }}
  {{- partial "pagination_links.html" . }}
  {{- end }}
</footer>

{{- end -}}{{/* end main */}}
